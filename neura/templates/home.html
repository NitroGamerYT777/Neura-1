{% extends 'base.html' %}

{% block content %}
<div class="row vh-100">
    <!-- Sidebar (Chat History) -->
    <div class="col-md-3 col-12 bg-light p-3 border-end">
        <h5 class="mb-3">Chat History</h5>
        <ul class="list-group list-group-flush overflow-auto" style="max-height: 85vh;">
            {% for chat in chats %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <a href="{{ url_for('chat.view', chat_id=chat.id) }}" class="text-decoration-none">
                    {{ chat.summary_title }}
                </a>
                <button class="btn btn-sm btn-outline-danger" onclick="deleteChat({{ chat.id }})">ðŸ—‘</button>
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Chat Input Section -->
    <div class="col-md-9 col-12 d-flex flex-column align-items-center justify-content-center p-4">
        <h2 class="mb-4">Ask Your AI</h2>
        <form action="" method="POST" class="w-75">
            <div class="input-group">
                <input type="text" class="form-control" name="user_input" placeholder="Type your message..." required>
                <button class="btn btn-primary">Send</button>
            </div>
        </form>
    </div>
</div>


<!-- JavaScript for deleting chat history -->
<script>
function deleteChat(chatId) {
    if (confirm("Are you sure you want to delete this chat?")) {
        fetch(`/chat/delete/${chatId}`, { method: "POST" })
            .then(() => location.reload());
    }
}
</script>



{% endblock %}
