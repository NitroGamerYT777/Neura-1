{% extends 'base.html' %}

{% block content %}
<div class="container-fluid vh-100 d-flex flex-column">
    <!-- Chat Messages Area -->
    <div class="flex-grow-1 overflow-auto p-4" id="chat-box">
        {% for message in messages %}
        <div class="mb-2">
            <strong>{{ message.sender }}:</strong> {{ message.content }}
        </div>
        {% endfor %}
    </div>

    <!-- Chat Input -->
    <form action="{{ url_for('chat.chat_view', chat_id=chat_id) }}" method="POST" class="p-3 border-top">
        <div class="input-group">
            <textarea id="chatInput" class="form-control" name="query" placeholder="Type a message..." required oninput="autoResize(this)"></textarea>
            <button class="btn btn-primary">Send</button>
        </div>
    </form>
</div>
<script>
    function autoResize(textarea) {
        textarea.style.height = "auto";  // Reset height to auto
        textarea.style.height = (textarea.scrollHeight) + "px";  // Set height based on content
    }
    </script>
    
{% endblock %}
